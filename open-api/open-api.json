{"openapi":"3.0.0","paths":{"/api/targets":{"post":{"description":"Creates a new target.","operationId":"TargetsController_createTarget","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTargetDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/Target"}}}}},"summary":"Create a target","tags":["Targets"]},"get":{"description":"Retrieves all targets in a workspace.","operationId":"TargetsController_getTargetsInWorkspace","parameters":[{"name":"page","required":false,"in":"query","schema":{"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"example":10,"type":"number"}},{"name":"sortBy","required":false,"in":"query","schema":{"example":"createdAt","type":"string"}},{"name":"sortOrder","required":false,"in":"query","schema":{"example":"DESC","type":"string"}},{"name":"workspaceId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/GetManyGetManyTargetResponseDtoDto"}}}}},"summary":"Get all targets in a workspace","tags":["Targets"]}},"/api/targets/{id}":{"get":{"description":"Retrieves a target by its ID.","operationId":"TargetsController_getTarget","parameters":[{"name":"id","required":true,"in":"path","description":"The id of the resource","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/Target"}}}}},"summary":"Get a target by ID","tags":["Targets"]}},"/api/targets/{id}/workspace/{workspaceId}":{"delete":{"description":"Deletes a target from a workspace.","operationId":"TargetsController_deleteTargetFromWorkspace","parameters":[{"name":"id","required":true,"in":"path","description":"The id of the resource","schema":{"type":"string"}},{"name":"workspaceId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/DefaultMessageResponseDto"}}}}},"summary":"Delete a target from a workspace","tags":["Targets"]}},"/api/targets/{id}/re-scan":{"post":{"description":"Rescans a target and triggers a new scan job.","operationId":"TargetsController_reScanTarget","parameters":[{"name":"id","required":true,"in":"path","description":"The id of the resource","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/DefaultMessageResponseDto"}}}}},"summary":"Rescan a target","tags":["Targets"]}},"/api/workspaces":{"post":{"description":"Creates a new workspace.","operationId":"WorkspacesController_createWorkspace","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateWorkspaceDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/Workspace"}}}}},"summary":"Create Workspace","tags":["Workspaces"]},"get":{"description":"Retrieves a list of workspaces that the user is a member of.","operationId":"WorkspacesController_getWorkspaces","parameters":[{"name":"page","required":false,"in":"query","schema":{"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"example":10,"type":"number"}},{"name":"sortBy","required":false,"in":"query","schema":{"example":"createdAt","type":"string"}},{"name":"sortOrder","required":false,"in":"query","schema":{"example":"DESC","type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/GetManyWorkspaceDto"}}}}},"summary":"Get Workspaces","tags":["Workspaces"]}},"/api/workspaces/{id}/statistics":{"get":{"description":"Retrieves statistics for a specific workspace.","operationId":"WorkspacesController_getWorkspaceStatistics","parameters":[{"name":"id","required":true,"in":"path","description":"The id of the resource","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/WorkspaceStatisticsResponseDto"}}}}},"summary":"Get Workspace Statistics","tags":["Workspaces"]}},"/api/workspaces/{id}":{"get":{"description":"Retrieves a workspace by its ID.","operationId":"WorkspacesController_getWorkspaceById","parameters":[{"name":"id","required":true,"in":"path","description":"The id of the resource","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/Workspace"}}}}},"summary":"Get Workspace By ID","tags":["Workspaces"]},"patch":{"description":"Updates a workspace by its ID.","operationId":"WorkspacesController_updateWorkspace","parameters":[{"name":"id","required":true,"in":"path","description":"The id of the resource","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateWorkspaceDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/DefaultMessageResponseDto"}}}}},"summary":"Update Workspace","tags":["Workspaces"]},"delete":{"description":"Deletes a workspace by its ID.","operationId":"WorkspacesController_deleteWorkspace","parameters":[{"name":"id","required":true,"in":"path","description":"The id of the resource","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/DefaultMessageResponseDto"}}}}},"summary":"Delete Workspace","tags":["Workspaces"]}},"/":{"get":{"operationId":"RootController_getHealth","parameters":[],"responses":{"200":{"description":""}},"tags":["Root"]}},"/api/init-admin":{"post":{"description":"Creates the first admin user in the system.","operationId":"RootController_createFirstAdmin","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateFirstAdminDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/DefaultMessageResponseDto"}}}}},"summary":"Creates the first admin user in the system.","tags":["Root"]}},"/api/jobs-registry":{"get":{"description":"Retrieves a list of jobs that the user is a member of.","operationId":"JobsRegistryController_getManyJobs","parameters":[{"name":"page","required":false,"in":"query","schema":{"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"example":10,"type":"number"}},{"name":"sortBy","required":false,"in":"query","schema":{"example":"createdAt","type":"string"}},{"name":"sortOrder","required":false,"in":"query","schema":{"example":"DESC","type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/GetManyJobDto"}}}}},"summary":"Get Jobs","tags":["JobsRegistry"]}},"/api/jobs-registry/{workerId}/next":{"get":{"operationId":"JobsRegistryController_getNextJob","parameters":[{"name":"workerId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/GetNextJobResponseDto"}}}}},"summary":"Retrieves the next job associated with the given worker that has not yet been started.","tags":["JobsRegistry"]}},"/api/jobs-registry/asset/{assetId}":{"get":{"operationId":"JobsRegistryController_getJobsByAssetId","parameters":[{"name":"assetId","required":true,"in":"path","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"example":10,"type":"number"}},{"name":"sortBy","required":false,"in":"query","schema":{"example":"createdAt","type":"string"}},{"name":"sortOrder","required":false,"in":"query","schema":{"example":"DESC","type":"string"}},{"name":"jobStatus","required":true,"in":"query","description":"Filter jobs by status","schema":{"default":"all","type":"string","enum":["pending","in_progress","completed","failed","cancelled","all"]}},{"name":"workerName","required":true,"in":"query","description":"Filter jobs by worker name","schema":{"default":"all","type":"string","enum":["subdomains","httpx","ports","all"]}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/GetManyJobDto"}}}}},"summary":"Gets jobs by asset ID, filtered by status and worker name.","tags":["JobsRegistry"]}},"/api/jobs-registry/target/{targetId}":{"get":{"operationId":"JobsRegistryController_getJobsByTargetId","parameters":[{"name":"targetId","required":true,"in":"path","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"example":10,"type":"number"}},{"name":"sortBy","required":false,"in":"query","schema":{"example":"createdAt","type":"string"}},{"name":"sortOrder","required":false,"in":"query","schema":{"example":"DESC","type":"string"}},{"name":"jobStatus","required":true,"in":"query","description":"Filter jobs by status","schema":{"default":"all","type":"string","enum":["pending","in_progress","completed","failed","cancelled","all"]}},{"name":"workerName","required":true,"in":"query","description":"Filter jobs by worker name","schema":{"default":"all","type":"string","enum":["subdomains","httpx","ports","all"]}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/GetManyJobDto"}}}}},"summary":"Gets jobs by target ID, filtered by status and worker name.","tags":["JobsRegistry"]}},"/api/jobs-registry/{workerId}/result":{"post":{"operationId":"JobsRegistryController_updateResult","parameters":[{"name":"workerId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateResultDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}]}}}}},"summary":"Updates the result of a job with the given worker ID.","tags":["JobsRegistry"]}},"/api/assets/target/{id}":{"get":{"description":"Retrieves a list of assets associated with the given target.","operationId":"AssetsController_getAllAssetsInTarget","parameters":[{"name":"id","required":true,"in":"path","description":"The id of the resource","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","schema":{"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"example":10,"type":"number"}},{"name":"sortBy","required":false,"in":"query","schema":{"example":"createdAt","type":"string"}},{"name":"sortOrder","required":false,"in":"query","schema":{"example":"DESC","type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/GetManyBaseResponseDto"}}}}},"summary":"Get assets in target","tags":["Assets"]}},"/api/workers/alive":{"post":{"operationId":"WorkersController_alive","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerAliveDto"}}}},"responses":{"201":{"description":""}},"tags":["Workers"]}},"/api/workers/join":{"post":{"description":"Worker join the cluster","operationId":"WorkersController_join","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkerJoinDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/WorkerInstance"}}}}},"summary":"Worker join","tags":["Workers"]}},"/api/workers":{"get":{"operationId":"WorkersController_getWorkers","parameters":[{"name":"page","required":false,"in":"query","schema":{"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"example":10,"type":"number"}},{"name":"sortBy","required":false,"in":"query","schema":{"example":"createdAt","type":"string"}},{"name":"sortOrder","required":false,"in":"query","schema":{"example":"DESC","type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AppResponseSerialization"}],"$ref":"#/components/schemas/GetManyBaseResponseDto"}}}}},"summary":"Gets all workers with pagination and sorting.","tags":["Workers"]}}},"info":{"title":"Open Attack Surface Management","description":"Open-source platform for cybersecurity Attack Surface Management (ASM)","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"schemas":{"Target":{"type":"object","properties":{"id":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"value":{"type":"string","example":"example.com","description":"The target domain (with optional URL path, will be parsed to extract domain)"},"lastDiscoveredAt":{"format":"date-time","type":"string"}},"required":["id","createdAt","updatedAt","value","lastDiscoveredAt"]},"AppResponseSerialization":{"type":"object","properties":{}},"CreateTargetDto":{"type":"object","properties":{"value":{"type":"string","example":"example.com","description":"The target domain (with optional URL path, will be parsed to extract domain)"},"workspaceId":{"type":"string","example":"xxxxxxxx","description":"The id of the workspace"}},"required":["value","workspaceId"]},"GetManyTargetResponseDto":{"type":"object","properties":{"id":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"value":{"type":"string","example":"example.com","description":"The target domain (with optional URL path, will be parsed to extract domain)"},"lastDiscoveredAt":{"format":"date-time","type":"string"},"status":{"type":"string","enum":["RUNNING","DONE"],"example":"DONE"},"totalAssets":{"type":"number","example":100}},"required":["id","createdAt","updatedAt","value","lastDiscoveredAt","status","totalAssets"]},"GetManyGetManyTargetResponseDtoDto":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/GetManyTargetResponseDto"}},"total":{"type":"number"},"page":{"type":"number"},"limit":{"type":"number"},"hasNextPage":{"type":"boolean"},"pageCount":{"type":"number"}},"required":["data","total","page","limit","hasNextPage","pageCount"]},"DefaultMessageResponseDto":{"type":"object","properties":{"message":{"type":"string","example":"Success"}},"required":["message"]},"Workspace":{"type":"object","properties":{"id":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"name":{"type":"string","example":"My Workspace","description":"The name of the workspace"},"description":{"type":"string","example":"This is my workspace","description":"The description of the workspace"}},"required":["id","createdAt","updatedAt","name","description"]},"CreateWorkspaceDto":{"type":"object","properties":{"name":{"type":"string","example":"My Workspace","description":"The name of the workspace"},"description":{"type":"string","example":"This is my workspace","description":"The description of the workspace"}},"required":["name","description"]},"GetManyWorkspaceDto":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Workspace"}},"total":{"type":"number"},"page":{"type":"number"},"limit":{"type":"number"},"hasNextPage":{"type":"boolean"},"pageCount":{"type":"number"}},"required":["data","total","page","limit","hasNextPage","pageCount"]},"WorkspaceStatisticsResponseDto":{"type":"object","properties":{}},"UpdateWorkspaceDto":{"type":"object","properties":{"name":{"type":"string","example":"My Workspace","description":"The name of the workspace"},"description":{"type":"string","example":"This is my workspace","description":"The description of the workspace"}}},"CreateFirstAdminDto":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"]},"Job":{"type":"object","properties":{"id":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"workerName":{"type":"string"},"status":{"type":"string"},"pickJobAt":{"format":"date-time","type":"string"},"completedAt":{"format":"date-time","type":"string"}},"required":["id","createdAt","updatedAt","workerName","status","pickJobAt","completedAt"]},"GetManyJobDto":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Job"}},"total":{"type":"number"},"page":{"type":"number"},"limit":{"type":"number"},"hasNextPage":{"type":"boolean"},"pageCount":{"type":"number"}},"required":["data","total","page","limit","hasNextPage","pageCount"]},"GetNextJobResponseDto":{"type":"object","properties":{"jobId":{"type":"string"},"value":{"type":"string"},"workerName":{"type":"string"},"command":{"type":"string","description":"Command to run"}},"required":["jobId","value","workerName","command"]},"UpdateResultDto":{"type":"object","properties":{"jobId":{"type":"string"},"data":{"type":"object"}},"required":["jobId","data"]},"GetManyBaseResponseDto":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object"}},"total":{"type":"number"},"page":{"type":"number"},"limit":{"type":"number"},"hasNextPage":{"type":"boolean"},"pageCount":{"type":"number"}},"required":["data","total","page","limit","hasNextPage","pageCount"]},"WorkerAliveDto":{"type":"object","properties":{"token":{"type":"string"}},"required":["token"]},"WorkerInstance":{"type":"object","properties":{"id":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","createdAt","updatedAt"]},"WorkerJoinDto":{"type":"object","properties":{"token":{"type":"string"}},"required":["token"]}}},"externalDocs":{"description":"Authentication Docs","url":"auth/docs"}}